name: Build Push Containers

on:
  pull_request:
    types:
      - labeled
      - opened
      - synchronize
  push:
    branches:
      - main

jobs:
  m1-da-light-node:
    uses: ./.github/workflows/container-build-push.yml
    with:
      image_name: m1-da-light-node
    secrets: inherit

  m1-da-light-node-manifest:
    needs: m1-da-light-node
    uses: ./.github/workflows/container-manifest.yml
    with:
      image_name: m1-da-light-node
    secrets: inherit

  m1-da-light-node-celestia-appd:
    uses: ./.github/workflows/container-build-push.yml
    with:
      image_name: m1-da-light-node-celestia-appd
    secrets: inherit

  m1-da-light-node-celestia-appd-manifest:
    needs: m1-da-light-node-celestia-appd
    uses: ./.github/workflows/container-manifest.yml
    with:
      image_name: m1-da-light-node-celestia-appd
    secrets: inherit

  # Repeat for other images following the same pattern

  # Example for suzuka-full-node-setup
  suzuka-full-node-setup:
    uses: ./.github/workflows/container-build-push.yml
    with:
      image_name: suzuka-full-node-setup
    secrets: inherit

  suzuka-full-node-setup-manifest:
    needs: suzuka-full-node-setup
    uses: ./.github/workflows/container-manifest.yml
    with:
      image_name: suzuka-full-node-setup
    secrets: inherit

  # Continue for the rest of the images

  # container-checks job remains the same or can be adjusted if needed