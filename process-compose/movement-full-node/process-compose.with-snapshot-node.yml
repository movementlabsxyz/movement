version: "3"

processes:
 
  movement-snapshot-node:
    command: |
      export MOVEMENT_SYNC="follower::follower-test-$MOVEMENT_SHARED_RANDOM_1<=>{default_signer_address_whitelist,maptos,maptos-storage,movement-da-db}/**"
      ./scripts/movement-full-node/snapshot

    depends_on:
      movement-celestia-da-light-node:
        condition: process_healthy

  # movement-full-node now depends on movement-snapshot-node having started
  movement-full-node:
    depends_on:
      movement-snapshot-node:
        condition: process_healthy